<div class="personal p-4 padding-small-1">
  <form [formGroup]="accountInfoForm" (ngSubmit)="submit()">
    <div class="d-flex align-items-center justify-content-between flex-column flex-lg-row">
      <div>
        <h1 class="fw-bold fs-5 text-center-small">
          {{'profile.personal_info' | translate}}
        </h1>
        <p class="color-muted my-2">
          {{'profile.personal_info_text' | translate}}
        </p>
      </div>
      <div class="d-flex align-items-center">
        <button class="btn btn-solid-main me-2" type="submit"
          [disabled]="accountInfoForm.invalid || !accountInfoForm.dirty">
          {{'general.save_changes' | translate}}
        </button>
        <button class="btn btn-solid-second me-2" (click)="back()">
          {{'general.cancel' | translate}}
        </button>
      </div>
    </div>
    <hr class="text-secondary-color mt-3" />
    <div class="user-info">
      <h1 class="fs-4 my-4 text-begin">
        {{'profile.account_info' | translate}}:
      </h1>
      <div class="row">

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'form.name'|translate}}
              </label>
              <input type="text" class="form-control" formControlName="name"
                [class.is-invalid]="(formControls?.['name']?.touched ||formControls?.['name']?.dirty) && formControls?.['name']?.invalid"
                [class.is-valid]="(formControls?.['name']?.dirty) && formControls?.['name']?.valid">
            </div>
            <div class="mt-2">
              <div *ngIf="(formControls?.name?.touched || formControls?.name?.dirty) && formControls?.name?.invalid">
                <div *ngIf="formControls?.name?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
                <div *ngIf="formControls?.name?.errors?.['minlength'] || formControls?.name?.errors?.['maxlength']">
                  <span class="text-danger fs-6">
                    {{'validations.name_length'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'form.phone'|translate}}
              </label>
              <ngx-intl-tel-input class="form-control"
                [preferredCountries]="[CountryISO.UnitedStates, CountryISO.Egypt]" [enableAutoCountrySelect]="false"
                [enablePlaceholder]="true" [searchCountryFlag]="true"
                [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                [selectedCountryISO]="CountryISO.Egypt" [maxLength]="15" [phoneValidation]="true" name="phone"
                formControlName="phone"
                [class.is-invalid]="(formControls?.['phone']?.touched || formControls?.['phone']?.dirty) && formControls?.['phone']?.invalid"
                [class.is-valid]="formControls?.['phone']?.dirty && formControls?.['phone']?.valid">
              </ngx-intl-tel-input>
            </div>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.['phone']?.touched || formControls?.['phone']?.dirty) && formControls?.['phone']?.invalid">
                <div *ngIf="formControls?.['phone']?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'form.email'|translate}}
              </label>
              <input type="email" class="form-control" formControlName="email"
                [class.is-invalid]="(formControls?.['email']?.touched ||formControls?.['email']?.dirty) && formControls?.['email']?.invalid"
                [class.is-valid]="(formControls?.['email']?.dirty) && formControls?.['email']?.valid">
            </div>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.['email']?.touched ||formControls?.['email']?.dirty) && formControls?.['email']?.invalid ">
                <div *ngIf="formControls?.email?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
                <div *ngIf="formControls?.email?.errors?.['email']">
                  <span class="text-danger fs-6">
                    {{'validations.not_valid'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label for="exampleFormControlInput1" class="form-label">
                {{"form.date_of_birth"|translate}}
              </label>
              <div class="d-flex border rounded overflow-hidden"
                [class.border-red]="(formControls?.['birthdate']?.touched ||formControls?.['birthdate']?.dirty) && formControls?.['birthdate']?.invalid"
                [class.border-green]="(formControls?.['birthdate']?.dirty) && formControls?.['birthdate']?.valid">
                <input matInput class="form-control border-0" [matDatepicker]=" picker" formControlName="birthdate">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </div>
            </div>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.['birthdate']?.touched ||formControls?.['birthdate']?.dirty) && formControls?.['birthdate']?.invalid ">
                <div *ngIf="formControls?.birthdate?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'form.company'|translate}}
              </label>
              <input type="text" class="form-control" formControlName="company"
                [class.is-invalid]="(formControls?.['company']?.touched ||formControls?.['company']?.dirty) && formControls?.['company']?.invalid"
                [class.is-valid]="(formControls?.['company']?.dirty) && formControls?.['company']?.valid">
            </div>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.company?.touched || formControls?.company?.dirty) && formControls?.company?.invalid">
                <div
                  *ngIf="formControls?.company?.errors?.['minlength'] || formControls?.company?.errors?.['maxlength']">
                  <span class="text-danger fs-6">
                    {{'validations.name_length'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'general.gender'|translate}}
              </label>
              <ng-select notFoundText="{{'general.no_item_founded'|translate}}" class="rounded" formControlName="gender"
                placeholder="{{'general.select' | translate}}"
                [class.border-red]="(formControls?.['gender']?.touched ||formControls?.['gender']?.dirty) && formControls?.['gender']?.invalid"
                [class.border-green]="(formControls?.['gender']?.dirty) && formControls?.['gender']?.valid">
                <ng-option value="male">{{'general.male' | translate}}</ng-option>
                <ng-option value="female">{{'general.female' | translate}}</ng-option>
              </ng-select>
            </div>
            <span class="text-secondary-color small">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dot"
                viewBox="0 0 16 16">
                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
              </svg>
              <span class="">
                {{'hints.select_one' | translate}}
              </span>
            </span>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.gender?.touched || formControls?.gender?.dirty) && formControls?.gender?.invalid">
                <div *ngIf="formControls?.gender?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'general.timezone'|translate}}
              </label>
              <ng-select notFoundText="{{'general.no_item_founded'|translate}}" class="rounded"
                formControlName="timeszone" placeholder="{{'general.select' | translate}}"
                [class.border-red]="(formControls?.['timeszone']?.touched ||formControls?.['timeszone']?.dirty) && formControls?.['timeszone']?.invalid"
                [class.border-green]="(formControls?.['timeszone']?.dirty) && formControls?.['timeszone']?.valid"
                [searchable]="true" [clearSearchOnAdd]="true">
                <ng-container *ngFor="let timezone of timeszone">
                  <ng-option [value]="timezone.id">{{timezone.name}}</ng-option>
                </ng-container>
              </ng-select>
            </div>
            <span class="text-secondary-color small">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dot"
                viewBox="0 0 16 16">
                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
              </svg>
              <span class="">
                {{'hints.select_one_seaech' | translate}}
              </span>
            </span>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.timeszone?.touched || formControls?.timeszone?.dirty) && formControls?.timeszone?.invalid">
                <div *ngIf="formControls?.timeszone?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'general.language'|translate}}
              </label>
              <ng-select notFoundText="{{'general.no_item_founded'|translate}}" class="rounded"
                formControlName="language" placeholder="{{'general.select' | translate}}"
                [class.border-red]="(formControls?.['language']?.touched ||formControls?.['language']?.dirty) && formControls?.['language']?.invalid"
                [class.border-green]="(formControls?.['language']?.dirty) && formControls?.['language']?.valid"
                [multiple]="true" [selectableGroup]="true" [closeOnSelect]="false" [selectableGroup]="true"
                [maxSelectedItems]="3" [searchable]="true" [clearSearchOnAdd]="true">
                <ng-container *ngFor="let lang of langs">
                  <ng-option [value]="lang.id">{{lang.name}}</ng-option>
                </ng-container>
              </ng-select>
            </div>
            <span class="text-secondary-color small">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dot"
                viewBox="0 0 16 16">
                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
              </svg>
              <span class="">
                {{'hints.selectm_seaech' | translate}}
              </span>
            </span>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.language?.touched || formControls?.language?.dirty) && formControls?.language?.invalid">
                <div *ngIf="formControls?.language?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'general.skills'|translate}}
              </label>
              <ng-select notFoundText="{{'general.no_item_founded'|translate}}" class="rounded" formControlName="skills"
                placeholder="{{'general.select' | translate}}"
                [class.border-red]="(formControls?.['skills']?.touched ||formControls?.['skills']?.dirty) && formControls?.['skills']?.invalid"
                [class.border-green]="(formControls?.['skills']?.dirty) && formControls?.['skills']?.valid"
                [searchable]="true" [clearSearchOnAdd]="true" [multiple]="true" [selectableGroup]="true"
                [closeOnSelect]="false" [items]="skills" bindLabel="name">

                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                  <input id="item-{{index}}" class="form-check-input mt-0" type="checkbox" [checked]="item$.selected"
                    [ngModel]="item$.selected" />
                  {{item.name | uppercase}}
                </ng-template>
              </ng-select>
            </div>
            <span class="text-secondary-color small">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dot"
                viewBox="0 0 16 16">
                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
              </svg>
              <span class="">
                {{'hints.selectm_check_search' | translate}}
              </span>
            </span>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.skills?.touched || formControls?.skills?.dirty) && formControls?.skills?.invalid">
                <div *ngIf="formControls?.skills?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'general.brands'|translate}}
              </label>
              <ng-select class="rounded" [items]="brands" [closeOnSelect]="false" [addTag]="addTagPromise"
                [multiple]="true" bindLabel="name" [loading]="loading" formControlName="brands"
                placeholder="{{'general.select' | translate}}"
                [class.border-red]="(formControls?.['brands']?.touched ||formControls?.['brands']?.dirty) && formControls?.['brands']?.invalid"
                [class.border-green]="(formControls?.['brands']?.dirty) && formControls?.['brands']?.valid">

                <ng-template ng-tag-tmp let-search="searchTerm">
                  <b>{{'general.create_new'|translate}}</b>: {{search}}
                </ng-template>
              </ng-select>
            </div>
            <span class="text-secondary-color small">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dot"
                viewBox="0 0 16 16">
                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
              </svg>
              <span class="">
                {{'hints.select_addnew' | translate}}
              </span>
            </span>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.brands?.touched || formControls?.brands?.dirty) && formControls?.brands?.invalid">
                <div *ngIf="formControls?.brands?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xl-6 col-md-10 col-sm-12 col-12">
          <div class="mb-3">
            <div>
              <label class="form-label">
                {{'general.account'|translate}}
              </label>
              <ng-select [items]="accounts" bindLabel="name" bindValue="name" groupBy="country"
                placeholder="{{'general.select' | translate}}" formControlName="account">
                <ng-template ng-optgroup-tmp let-item="item">
                  {{item.country || 'general.unnammed'|translate}}
                </ng-template>
              </ng-select>
            </div>
            <span class="text-secondary-color small">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dot"
                viewBox="0 0 16 16">
                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
              </svg>
              <span class="">
                {{'hints.select_one_group' | translate}}
              </span>
            </span>
            <div class="mt-2">
              <div
                *ngIf="(formControls?.brands?.touched || formControls?.brands?.dirty) && formControls?.brands?.invalid">
                <div *ngIf="formControls?.brands?.errors?.['required']">
                  <span class="text-danger fs-6">
                    {{'validations.reuired_field'|translate}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
    <hr class="text-secondary-color mt-3">
    <div class="security">

      <h1 class="fs-4 my-4 text-begin">
        {{'profile.security' | translate}}:
      </h1>

      <div class="d-flex flex-column-md my-4">
        <label class="form-label w-25 mb-0 w-100-md mb-1-md lh-base">
          {{'profile.communcation' | translate}}
        </label>
        <div class="d-flex w-100">
          <div class="form-check me-2">
            <input class="form-check-input" type="checkbox" id="flexCheckDefault1">
            <label class="form-check-label lh-base" for="flexCheckDefault1">
              {{'form.email' | translate}}
            </label>
          </div>
          <div class="form-check me-2">
            <input class="form-check-input" type="checkbox" id="flexCheckDefault2">
            <label class="form-check-label lh-base" for="flexCheckDefault2">
              {{'form.sms' | translate}}
            </label>
          </div>
          <div class="form-check me-2">
            <input class="form-check-input" type="checkbox" id="flexCheckDefault3">
            <label class="form-check-label lh-base" for="flexCheckDefault3">
              {{'form.email' | translate}}
            </label>
          </div>

        </div>
      </div>

      <div class="d-flex flex-column-md mt-3">
        <label class="form-label w-25 mb-0 w-100-md mb-1-md lh-base">
          {{'profile.login_verification' | translate}}
        </label>

        <div class="w-100">
          <button class="btn mb-3 setup-btn">
            {{'profile.login_verification_btn' | translate}}
          </button>
          <p class="text-secondary-color lh-base my-2">
            {{'profile.login_verification_text' | translate}}
            <a class="text-main-color">
              {{'general.learn_more' | translate}}
            </a>
          </p>
        </div>
      </div>

      <div class="d-flex flex-column-md mt-3">
        <label class="form-label mb-0 w-100-md mb-1-md lh-base">
          {{'profile.password_reset_verification' | translate}}
        </label>

        <div>
          <div class="form-check me-2">
            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
            <label class="form-check-label lh-base" for="flexCheckDefault">
              {{'profile.deactivate_attention' | translate}}
            </label>
          </div>
          <p class="text-secondary-color lh-base my-2">
            <span>
              {{'profile.deactivate_text' | translate}}
            </span>
            <a class="text-main-color">
              {{'general.learn_more' | translate}}
            </a>
          </p>
          <button class="btn mt-3 deactive-btn" (click)="openDialog()">
            {{'profile.deactivate' | translate}}
          </button>
        </div>
      </div>

    </div>
  </form>
</div>

<ng-container *ngIf="isloadingBtn">
  <div class="overlay-spinner-loading d-flex justify-content-center align-items-center">
    <div class="spinner-grow" role="status">
    </div>
  </div>
</ng-container>
