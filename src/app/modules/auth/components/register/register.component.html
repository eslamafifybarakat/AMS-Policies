<ng-container *ngIf="isLoadingBtn">
  <div
    class="overlay-spinner-loading d-flex justify-content-center align-items-center"
  >
    <div class="spinner-grow" role="status"></div>
  </div>
</ng-container>
<div class="register overflow-hidden bg-white-color">
  <div class="row d-flex justify-content-center align-items-center">
    <div class="col-1 d-medium-none"></div>

    <div class="col-xl-5 col-md-6 col-sm-8 col-12 h-100">
      <div
        class="d-flex flex-column justify-content-center align-items-center min-vh-100 mx-5 mt-5"
      >
        <div
          class="d-flex justify-content-between align-items-center select-language w-100"
        >
          <img
            *ngIf="currentLanguage == 'ar'"
            src="assets/image/us.svg"
            class="fit-contain lang"
            (click)="tanslationService?.changeLang('en')"
          />
          <img
            *ngIf="currentLanguage == 'en'"
            src="assets/image/eg.svg"
            class="fit-contain lang"
            (click)="tanslationService?.changeLang('ar')"
          />
          <i
            class="fa fa-arrow-left scaleX-rtl"
            style="font-size: 1.5rem"
            (click)="back()"
          ></i>
        </div>

        <h2 class="text-black-color mt-3 fs-3">
          {{ "form.registeration" | translate }}
        </h2>

        <div class="d-flex justify-content-between align-items-center w-100">
          <form
            [formGroup]="registerForm"
            (ngSubmit)="submit()"
            class="form-content py-5 w-100"
          >
            <div class="mb-3">
              <div>
                <label class="form-label">
                  {{ "form.name" | translate }}
                </label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="name"
                  placeholder="{{ 'placeholder.name' | translate }}"
                  [class.is-invalid]="(formControls?.['name']?.touched ||formControls?.['name']?.dirty) && formControls?.['name']?.invalid"
                  [class.is-valid]="(formControls?.['name']?.dirty) && formControls?.['name']?.valid"
                />
              </div>
              <div class="mt-2">
                <div
                  *ngIf="
                    (formControls?.name?.touched ||
                      formControls?.name?.dirty) &&
                    formControls?.name?.invalid
                  "
                >
                  <div *ngIf="formControls?.name?.errors?.['required']">
                    <span class="text-danger fs-6">
                      {{ "validations.reuired_field" | translate }}
                    </span>
                  </div>
                  <div
                    *ngIf="formControls?.name?.errors?.['minlength'] || formControls?.name?.errors?.['maxlength']"
                  >
                    <span class="text-danger fs-6">
                      {{ "validations.name_length" | translate }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <div>
                <label class="form-label">
                  {{ "form.phone" | translate }}
                </label>
                <ngx-intl-tel-input
                  class="form-control"
                  [preferredCountries]="[
                    CountryISO.UnitedStates,
                    CountryISO.Egypt
                  ]"
                  [enableAutoCountrySelect]="false"
                  [enablePlaceholder]="true"
                  [searchCountryFlag]="true"
                  [searchCountryField]="[
                    SearchCountryField.Iso2,
                    SearchCountryField.Name
                  ]"
                  [selectFirstCountry]="false"
                  [selectedCountryISO]="CountryISO.Egypt"
                  [maxLength]="15"
                  [phoneValidation]="true"
                  name="phone"
                  formControlName="phone"
                  [class.is-invalid]="(formControls?.['phone']?.touched || formControls?.['phone']?.dirty) && formControls?.['phone']?.invalid"
                  [class.is-valid]="formControls?.['phone']?.dirty && formControls?.['phone']?.valid"
                >
                </ngx-intl-tel-input>
              </div>
              <div class="mt-2">
                <div
                  *ngIf="(formControls?.['phone']?.touched || formControls?.['phone']?.dirty) && formControls?.['phone']?.invalid"
                >
                  <div *ngIf="formControls?.['phone']?.errors?.['required']">
                    <span class="text-danger fs-6">
                      {{ "validations.reuired_field" | translate }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <div>
                <label class="form-label">
                  {{ "form.email" | translate }}
                </label>
                <input
                  type="email"
                  class="form-control"
                  formControlName="email"
                  placeholder="{{ 'placeholder.email' | translate }}"
                  [class.is-invalid]="(formControls?.['email']?.touched ||formControls?.['email']?.dirty) && formControls?.['email']?.invalid"
                  [class.is-valid]="(formControls?.['email']?.dirty) && formControls?.['email']?.valid"
                />
              </div>
              <div class="mt-2">
                <div
                  *ngIf="(formControls?.['email']?.touched ||formControls?.['email']?.dirty) && formControls?.['email']?.invalid "
                >
                  <div *ngIf="formControls?.email?.errors?.['required']">
                    <span class="text-danger fs-6">
                      {{ "validations.reuired_field" | translate }}
                    </span>
                  </div>
                  <div *ngIf="formControls?.email?.errors?.['email']">
                    <span class="text-danger fs-6">
                      {{ "validations.not_valid" | translate }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label">
                {{ "form.password" | translate }}
              </label>
              <div class="input-group mb-3">
                <input
                  [type]="showeye ? 'text' : 'password'"
                  class="login-password-form form-control"
                  placeholder="{{ 'placeholder.password' | translate }}"
                  id="exampleInputPassword1"
                  formControlName="password"
                  name="txtPassword"
                  compare-password="txtConfirmPassword"
                  [class.is-invalid]="(formControls?.['password']?.touched||formControls?.['password']?.dirty)&&formControls?.['password']?.invalid"
                  [class.is-valid]="formControls?.['password']?.dirty&&formControls?.['password']?.valid"
                />
                <span
                  class="togglepassword bg-white-color input-group-text"
                  id="basic-addon1"
                  [class.border-red]="(formControls?.['password']?.touched||formControls?.['password']?.dirty)&&formControls?.['password']?.invalid"
                  [class.border-green]="formControls?.['password']?.dirty&&formControls?.['password']?.valid"
                  (click)="togglepassword()"
                  ><i
                    class="bg-white-color"
                    [class]="showeye ? 'fas fa-eye' : 'fas fa-eye-slash'"
                  ></i
                ></span>
              </div>
              <div class="mt-2">
                <div
                  *ngIf="
                    (formControls?.password?.touched ||
                      formControls?.password?.dirty) &&
                    formControls?.password?.invalid
                  "
                >
                  <div *ngIf="formControls?.password?.errors?.['required']">
                    <span class="text-danger fs-6">
                      {{ "validations.reuired_field" | translate }}
                    </span>
                  </div>
                  <div
                    *ngIf="formControls?.password?.errors?.['minlength'] || formControls?.password?.errors?.['maxlength']"
                  >
                    <span class="text-danger fs-6">
                      {{ "validations.pass_length" | translate }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="exampleInputPassword2" class="form-label">
                {{ "form.confirm_password" | translate }}
              </label>
              <div class="input-group mb-3">
                <input
                  [type]="showeye2 ? 'text' : 'password'"
                  class="login-password-form form-control"
                  placeholder="{{ 'placeholder.confirm_password' | translate }}"
                  id="exampleInputPassword2"
                  formControlName="confirmPassword"
                  [class.is-invalid]="
                    (formControls?.confirmPassword?.touched ||
                      formControls?.confirmPassword?.dirty) &&
                    formControls?.confirmPassword?.invalid
                  "
                  [class.is-valid]="
                    (formControls?.confirmPassword?.touched ||
                      formControls?.confirmPassword?.dirty) &&
                    formControls?.confirmPassword?.valid
                  "
                />
                <span
                  class="togglepassword input-group-text bg-white-color"
                  id="basic-addon1"
                  [class.border-red]="(formControls?.['confirmPassword']?.touched||formControls?.['confirmPassword']?.dirty)&&formControls?.['confirmPassword']?.invalid"
                  [class.border-green]="formControls?.['confirmPassword']?.dirty&&formControls?.['confirmPassword']?.valid"
                  (click)="togglepassword_confirm()"
                  ><i
                    class="bg-white-color"
                    [class]="showeye2 ? 'fas fa-eye' : 'fas fa-eye-slash'"
                  ></i
                ></span>
              </div>
              <div class="mt-2">
                <div
                  *ngIf="(formControls?.['confirmPassword']?.touched || formControls?.['confirmPassword']?.dirty) && formControls?.['confirmPassword']?.invalid"
                >
                  <div
                    *ngIf="formControls?.['confirmPassword']?.errors?.['required']"
                  >
                    <span class="text-danger fs-6">
                      {{ "validations.reuired_field" | translate }}
                    </span>
                  </div>
                  <div
                    *ngIf="formControls?.['confirmPassword']?.errors?.['ConfirmPassword']"
                  >
                    <span class="text-danger fs-6">
                      {{ "validations.not_match" | translate }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <div>
                <label for="exampleFormControlInput1" class="form-label">
                  {{ "form.date_of_birth" | translate }}
                </label>
                <div
                  class="d-flex border rounded"
                  [class.border-red]="(formControls?.['birth_date']?.touched ||formControls?.['birth_date']?.dirty) && formControls?.['birth_date']?.invalid"
                  [class.border-green]="(formControls?.['birth_date']?.dirty) && formControls?.['birth_date']?.valid"
                >
                  <input
                    matInput
                    class="form-control border-0"
                    placeholder="{{ 'placeholder.date_of_birth' | translate }}"
                    [matDatepicker]="picker"
                    formControlName="birth_date"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </div>
              </div>
              <div class="mt-2">
                <div
                  *ngIf="(formControls?.['birth_date']?.touched ||formControls?.['birth_date']?.dirty) && formControls?.['birth_date']?.invalid "
                >
                  <div *ngIf="formControls?.birth_date?.errors?.['required']">
                    <span class="text-danger fs-6">
                      {{ "validations.reuired_field" | translate }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <button
              type="submit"
              class="btn w-100 btn-solid-main mt-2"
              [disabled]="registerForm.invalid"
            >
              {{ "form.confirm" | translate }}
            </button>

            <div class="d-flex justify-content-between align-items-center mt-3">
              <h1 class="fw-bold text-secondary-color">
                {{ "form.have_account" | translate }}
                <a routerLink="/auth/login">
                  {{ "form.login" | translate }}
                </a>
              </h1>
              <ng-container *ngIf="showResend">
                <button class="btn btn-solid-main p-2" (click)="resend()">
                  Resend
                </button>
              </ng-container>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-1 d-medium-none"></div>

    <div class="col-5 d-medium-none h-100">
      <div class="h-100 d-flex justify-content-center align-items-center">
        <img
          class="register-img img-fluid fit-object-cover"
          src="assets/image/policy/online-policy.jpg"
          alt="login-omg"
        />
      </div>
    </div>
  </div>
</div>
