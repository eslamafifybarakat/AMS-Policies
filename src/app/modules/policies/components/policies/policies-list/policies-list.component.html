<div class="polices-list py-small-2">
  <div class="container px-0">
    <div class="card-style rounded-25 px-4 py-3">
      <div
        class="header-polices-list d-flex align-items-center justify-content-between flex-column-md gap-medium-2 p-1 mt-3">
        <h1 class="fs-5 text-main-color">
          <span>
            {{'policies.policies' | translate}}
          </span>
          <span class="badge bg-second-color text-main-color rounded-pill">
            {{items?.length}}
          </span>
        </h1>
        <div class="search-table">
          <div class="input-group flex-nowrap">
            <span class="input-group-text input-group-text-L bg-white-color">
              <a (click)="applySearch($event)">
                <i class="fa fa-search fas fa-color"></i>
              </a>
            </span>
            <input type="text" class="form-control form-control-search-group" (keyup.enter)="applySearch($event)"
              [(ngModel)]="searchValue" placeholder="{{'general.search' | translate}}">
            <span class="input-group-text bg-white-color input-group-text-R">
              <a (click)="searchValue !==''?clearSearch():''">
                <i class="fa text-danger-color" [ngClass]="searchValue !==''?'fa-close':''"></i>
              </a>
            </span>
          </div>
        </div>
        <button class="btn btn-outline-main-header" [routerLink]="['/home/policies/policy-data']">
          <i class="fas fa-plus me-1"></i>
          {{'polices_list.new_policy' | translate}}
        </button>
      </div>
      <hr class="color-grey-400" />
      <div class="d-flex align-items-center justify-content-end gap-2">
        <button type="button" class="btn btn-solid-main btn-sm">{{'general.export' | translate}}</button>
        <button type="button" class="btn btn-outline-main btn-sm">{{'general.print' | translate}}</button>
        <button type="button" class="btn btn-success btn-sm"
          (click)="isWaitingAction?'':goToDetails(1)">{{'general.edit' | translate}}</button>
        <button type="button" class="btn btn-danger btn-sm"
          (click)="isWaitingAction?'':onaDeleteItem({name:'eslam'})">{{'general.delete' | translate}}</button>
      </div>
      <div class="content-table mt-4">
        <table class="table color-grey-400 w-100">
          <thead class="bg-secondary-color text-white-color">
            <tr>
              <th scope="col">
                <span class="d-flex align-items-center">
                  <span class="w-100 text-truncate">{{'polices_list.sale_id' | translate}}</span>
                  <div class="dropdown mx-1">
                    <button class="btn dropdown-toggle color-grey-400 p-0" type="button" id="select-dropdown"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="d-flex">
                        <i class="fas fa-arrow-up text-white-color fs-dot-status"></i>
                        <i class="fas fa-arrow-down text-white-color fs-dot-status"></i>
                      </div>
                    </button>
                    <ul class="dropdown-menu shadow border-0">
                      <a (click)="isWaitingAction? '': ''">
                        <li
                          class="dropdown-item py-2 mb-2 d-flex align-items-center justify-content-between edit-hover">
                          <span class="text-muted">
                            {{'general.asc' | translate}}
                          </span>
                          <i class="fas fa-arrow-up text-muted"></i>
                        </li>
                      </a>
                      <a (click)="isWaitingAction? '': ''">
                        <li class="dropdown-item py-2 d-flex align-items-center justify-content-between delete-hover">
                          <span class="text-muted">
                            {{'general.desc' | translate}}
                          </span>
                          <i class="fas fa-arrow-down text-muted"></i>
                        </li>
                      </a>
                    </ul>
                  </div>
                </span>
              </th>
              <th scope="col">
                <span class="d-flex align-items-center">
                  <span class="w-100 text-truncate">{{'polices_list.customer_name' | translate}}</span>
                  <div class="dropdown mx-1">
                    <button class="btn dropdown-toggle color-grey-400 p-0" type="button" id="select-dropdown"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="d-flex">
                        <i class="fas fa-arrow-up text-white-color fs-dot-status"></i>
                        <i class="fas fa-arrow-down text-white-color fs-dot-status"></i>
                      </div>
                    </button>
                    <ul class="dropdown-menu shadow border-0">
                      <a (click)="isWaitingAction? '': ''">
                        <li
                          class="dropdown-item py-2 mb-2 d-flex align-items-center justify-content-between edit-hover">
                          <span class="text-muted">
                            {{'general.asc' | translate}}
                          </span>
                          <i class="fas fa-arrow-up text-muted"></i>
                        </li>
                      </a>
                      <a (click)="isWaitingAction? '': ''">
                        <li class="dropdown-item py-2 d-flex align-items-center justify-content-between delete-hover">
                          <span class="text-muted">
                            {{'general.desc' | translate}}
                          </span>
                          <i class="fas fa-arrow-down text-muted"></i>
                        </li>
                      </a>
                    </ul>
                  </div>
                </span>
              </th>
              <th scope="col">
                <span class="d-flex align-items-center">
                  <span class="w-100 text-truncate">{{'polices_list.customer_id' | translate}}</span>
                  <div class="dropdown mx-1">
                    <button class="btn dropdown-toggle color-grey-400 p-0" type="button" id="select-dropdown"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="d-flex">
                        <i class="fas fa-arrow-up text-white-color fs-dot-status"></i>
                        <i class="fas fa-arrow-down text-white-color fs-dot-status"></i>
                      </div>
                    </button>
                    <ul class="dropdown-menu shadow border-0">
                      <a (click)="isWaitingAction? '': ''">
                        <li
                          class="dropdown-item py-2 mb-2 d-flex align-items-center justify-content-between edit-hover">
                          <span class="text-muted">
                            {{'general.asc' | translate}}
                          </span>
                          <i class="fas fa-arrow-up text-muted"></i>
                        </li>
                      </a>
                      <a (click)="isWaitingAction? '': ''">
                        <li class="dropdown-item py-2 d-flex align-items-center justify-content-between delete-hover">
                          <span class="text-muted">
                            {{'general.desc' | translate}}
                          </span>
                          <i class="fas fa-arrow-down text-muted"></i>
                        </li>
                      </a>
                    </ul>
                  </div>
                </span>
              </th>
              <th scope="col">
                <span class="d-flex align-items-center">
                  <span class="w-100 text-truncate">{{'polices_list.establish_date' | translate}}</span>
                  <div class="dropdown mx-1">
                    <button class="btn dropdown-toggle color-grey-400 p-0" type="button" id="select-dropdown"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="d-flex">
                        <i class="fas fa-arrow-up text-white-color fs-dot-status"></i>
                        <i class="fas fa-arrow-down text-white-color fs-dot-status"></i>
                      </div>
                    </button>
                    <ul class="dropdown-menu shadow border-0">
                      <a (click)="isWaitingAction? '': ''">
                        <li
                          class="dropdown-item py-2 mb-2 d-flex align-items-center justify-content-between edit-hover">
                          <span class="text-muted">
                            {{'general.asc' | translate}}
                          </span>
                          <i class="fas fa-arrow-up text-muted"></i>
                        </li>
                      </a>
                      <a (click)="isWaitingAction? '': ''">
                        <li class="dropdown-item py-2 d-flex align-items-center justify-content-between delete-hover">
                          <span class="text-muted">
                            {{'general.desc' | translate}}
                          </span>
                          <i class="fas fa-arrow-down text-muted"></i>
                        </li>
                      </a>
                    </ul>
                  </div>
                </span>
              </th>
              <th scope="col">
                <span class="d-flex align-items-center">
                  <span class="w-100 text-truncate">{{'polices_list.invoice_price' | translate}}</span>
                  <div class="dropdown mx-1">
                    <button class="btn dropdown-toggle color-grey-400 p-0" type="button" id="select-dropdown"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="d-flex">
                        <i class="fas fa-arrow-up text-white-color fs-dot-status"></i>
                        <i class="fas fa-arrow-down text-white-color fs-dot-status"></i>
                      </div>
                    </button>
                    <ul class="dropdown-menu shadow border-0">
                      <a (click)="isWaitingAction? '': ''">
                        <li
                          class="dropdown-item py-2 mb-2 d-flex align-items-center justify-content-between edit-hover">
                          <span class="text-muted">
                            {{'general.asc' | translate}}
                          </span>
                          <i class="fas fa-arrow-up text-muted"></i>
                        </li>
                      </a>
                      <a (click)="isWaitingAction? '': ''">
                        <li class="dropdown-item py-2 d-flex align-items-center justify-content-between delete-hover">
                          <span class="text-muted">
                            {{'general.desc' | translate}}
                          </span>
                          <i class="fas fa-arrow-down text-muted"></i>
                        </li>
                      </a>
                    </ul>
                  </div>
                </span>
              </th>
              <th scope="col">
                <span class="d-flex align-items-center">
                  <span class="w-100 text-truncate">{{'general.duration' | translate}}</span>
                  <div class="dropdown mx-1">
                    <button class="btn dropdown-toggle color-grey-400 p-0" type="button" id="select-dropdown"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="d-flex">
                        <i class="fas fa-arrow-up text-white-color fs-dot-status"></i>
                        <i class="fas fa-arrow-down text-white-color fs-dot-status"></i>
                      </div>
                    </button>
                    <ul class="dropdown-menu shadow border-0">
                      <a (click)="isWaitingAction? '': ''">
                        <li
                          class="dropdown-item py-2 mb-2 d-flex align-items-center justify-content-between edit-hover">
                          <span class="text-muted">
                            {{'general.asc' | translate}}
                          </span>
                          <i class="fas fa-arrow-up text-muted"></i>
                        </li>
                      </a>
                      <a (click)="isWaitingAction? '': ''">
                        <li class="dropdown-item py-2 d-flex align-items-center justify-content-between delete-hover">
                          <span class="text-muted">
                            {{'general.desc' | translate}}
                          </span>
                          <i class="fas fa-arrow-down text-muted"></i>
                        </li>
                      </a>
                    </ul>
                  </div>
                </span>
              </th>
              <th scope="col" class="px-3">
                <span class="d-flex align-items-center">
                  <span class="w-100 text-truncate">{{'general.status' | translate}}</span>
                  <div class="dropdown mx-1">
                    <button class="btn dropdown-toggle color-grey-400 p-0" type="button" id="select-dropdown"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="d-flex">
                        <i class="fas fa-arrow-up text-white-color fs-dot-status"></i>
                        <i class="fas fa-arrow-down text-white-color fs-dot-status"></i>
                      </div>
                    </button>
                    <ul class="dropdown-menu shadow border-0">
                      <a (click)="isWaitingAction? '': ''">
                        <li
                          class="dropdown-item py-2 mb-2 d-flex align-items-center justify-content-between edit-hover">
                          <span class="text-muted">
                            {{'general.asc' | translate}}
                          </span>
                          <i class="fas fa-arrow-up text-muted"></i>
                        </li>
                      </a>
                      <a (click)="isWaitingAction? '': ''">
                        <li class="dropdown-item py-2 d-flex align-items-center justify-content-between delete-hover">
                          <span class="text-muted">
                            {{'general.desc' | translate}}
                          </span>
                          <i class="fas fa-arrow-down text-muted"></i>
                        </li>
                      </a>
                    </ul>
                  </div>
                </span>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of items | slice: (currentPage-1) * pageSize : currentPage * pageSize">
              <td>
                {{item?.id}}
              </td>
              <td>
                {{item?.client}}
              </td>
              <td>
                {{item?.client_id}}
              </td>
              <td>
                {{item?.esablishDate | date}}
              </td>
              <td>
                {{item?.price}}
              </td>
              <td>
                12:54
              </td>
              <td>
                <span class="d-inline-block w-100 text-truncate">
                  <i class=" fas fa-circle fs-dot-status" [class]="item?.class"></i>
                  <span class="w-100 text-truncate px-1">
                    {{item?.status}}
                  </span>
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="d-flex justify-content-center mt-5 mb-2">
        <ngb-pagination [collectionSize]="items.length" [pageSize]="pageSize" [(page)]="currentPage" [maxSize]="3"
          (pageChange)="onChange($event)" [rotate]="true" [ellipses]="true" [boundaryLinks]="true">
        </ngb-pagination>
      </div>
    </div>
  </div>
  <ng-container *ngIf="isLoading">
    <div class="overlay-spinner-loading d-flex justify-content-center align-items-center">
      <div class="spinner-grow" role="status">
      </div>
    </div>
  </ng-container>
